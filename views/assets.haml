%p
  %img{src: 'https://en.bitcoin.it/w/images/en/2/29/BC_Logo_.png', style: 'width: 64px; height: 64px;'}

%h2
  Assets

- if defined?(guser) && vip?
  %form{method: 'POST', action: '/add-asset'}
    %label Add cold asset:
    %input{type: 'text', name: 'address', maxlength: 100, size: 35, placeholder: 'Bitcoin address', autocomplete: 'off', tabindex: 1}
    %input{type: 'submit', tabindex: 2, value: 'Add'}

- list = assets.all

- if list.empty?
  %p
    The list is empty. Most probably there is something wrong.
    Please,
    %a{href: 'https://t.me/zold_io'} contact us
    in our Telegram group.
- else
  %p
    The total balance is
    %strong= balance
    BTC /
    approx.
    = "$#{(price * balance).round}:"
  %p
    This is a full list of our Bitcoin assets:
  %table.compact
    %colgroup
      %col{style: 'width: 25em'}
      %col{style: 'width: 4em'}
      %col{style: 'width: 4em'}
      %col{style: ''}
    %thead
      %tr
        %th
          Address
        %th
          Balance
        %th
          Updated
        %th
    %tbody
      - list.each do |a|
        %tr
          %td
            %a{href: "https://www.blockchain.com/btc/address/#{a[:address]}"}= a[:address].gsub(/([^ ]{4})/, '\1&shy;')
          %td.right{title: a[:value]}
            = format('%.04f', a[:value].to_f / 100_000_000)
          %td{title: a[:updated].utc.iso8601}
            = Zold::Age.new(a[:updated])
          %td
            - if a[:hot]
              %span.green Hot
            - else
              %span.red Cold
  %p
    = succeed ':' do
      %strong.red ATTENTION
    Do not send your bitcoins to these addresses!
  %p
    The system can send you bitcoins only from
    %span.green hot
    addresses, while
    %span.red cold
    ones are owned by the management of Zerocracy.
    Their private keys are not kept in the database.
